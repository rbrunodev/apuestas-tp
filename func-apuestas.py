EQUIPOS = {
    "RIVER PLATE": 435, "TALLERES": 456, "SAN LORENZO": 460, "ESTUDIANTES LP": 450, "ROSARIO CENTRAL": 437,
    "DEFENSA Y JUSTICIA": 442, "LANUS": 446, "BELGRANO": 440, "ARGENTINOS JUNIORS": 458, "GODOY CRUZ": 439,
    "BOCA JUNIORS": 451, "NEWELLS OLD BOYS": 457, "PLATENSE": 1064, "SARMIENTO": 474,
    "GIMNASIA LP": 434, "CENTRAL CORDOBA DE SANTIAGO DEL ESTERO": 1065, "COLON": 448, "RACING CLUB": 436,
    "BARRACAS CENTRAL": 2432, "TIGRE": 452, "INSTITUTO": 478, "INDEPENDIENTE": 453, "ATLETICO TUCUMAN": 455,
    "UNION DE SANTA FE": 441, "VELEZ SARFIELD": 438, "HURACAN": 445, "BANFIELD": 449, "ARSENAL DE SARANDI": 459
}

FIXTURES = {971183: {'codigo': 971183, 'date': '2023-08-20T00:00:00+00:00', 'team_local': 'Argentinos JRS', 'team_visitor': 'River Plate', 'rival': 'Argentinos JRS'}, 971199: {'codigo': 971199, 'date': '2023-08-27T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Barracas Central', 'rival': 'Barracas Central'}, 971206: {'codigo': 971206, 'date': '2023-09-03T00:00:00+00:00', 'team_local': 'Velez Sarsfield', 'team_visitor': 'River Plate', 'rival': 'Velez Sarsfield'}, 971223: {'codigo': 971223, 'date': '2023-09-10T00:00:00+00:00', 'team_local': 'Arsenal Sarandi', 'team_visitor': 'River Plate', 'rival': 'Arsenal Sarandi'}, 971231: {'codigo': 971231, 'date': '2023-09-17T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Atletico Tucuman', 'rival': 'Atletico Tucuman'}, 971246: {'codigo': 971246, 'date': '2023-09-24T00:00:00+00:00', 'team_local': 'Banfield', 'team_visitor': 'River Plate', 'rival': 'Banfield'}, 971259: {'codigo': 971259, 'date': '2023-10-01T00:00:00+00:00', 'team_local': 'Boca Juniors', 'team_visitor': 'River Plate', 'rival': 'Boca Juniors'}, 971268: {'codigo': 971268, 'date': '2023-10-08T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Talleres Cordoba', 'rival': 'Talleres Cordoba'}, 971281: {'codigo': 971281, 'date': '2023-10-15T00:00:00+00:00', 'team_local': 'Colon Santa Fe', 'team_visitor': 'River Plate', 'rival': 'Colon Santa Fe'}, 971293: {'codigo': 971293, 'date': '2023-10-22T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Independiente', 'rival': 'Independiente'}, 971304: {'codigo': 971304, 'date': '2023-10-29T00:00:00+00:00', 'team_local': 'Gimnasia L.P.', 'team_visitor': 'River Plate', 'rival': 'Gimnasia L.P.'}, 971318: {'codigo': 971318, 'date': '2023-11-05T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Huracan', 'rival': 'Huracan'}, 971327: {'codigo': 971327, 'date': '2023-11-12T00:00:00+00:00', 'team_local': 'Rosario Central', 'team_visitor': 'River Plate', 'rival': 'Rosario Central'}, 971350: {'codigo': 971350, 'date': '2023-01-29T00:30:00+00:00', 'team_local': 'Central Cordoba de Santiago', 'team_visitor': 'River Plate', 'rival': 'Central Cordoba de Santiago'}, 971374: {'codigo': 971374, 'date': '2023-02-04T22:15:00+00:00', 'team_local': 'Belgrano Cordoba', 'team_visitor': 'River Plate', 'rival': 'Belgrano Cordoba'}, 971376: {'codigo': 971376, 'date': '2023-02-12T22:15:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Argentinos JRS', 'rival': 'Argentinos JRS'}, 971397: {'codigo': 971397, 'date': '2023-02-18T21:00:00+00:00', 'team_local': 'Tigre', 'team_visitor': 'River Plate', 'rival': 'Tigre'}, 971401: {'codigo': 971401, 'date': '2023-02-26T22:15:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Arsenal Sarandi', 'rival': 'Arsenal Sarandi'}, 971420: {'codigo': 971420, 'date': '2023-03-04T22:15:00+00:00', 'team_local': 'Lanus', 'team_visitor': 'River Plate', 'rival': 'Lanus'}, 971426: {'codigo': 971426, 'date': '2023-03-12T22:15:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Godoy Cruz', 'rival': 'Godoy Cruz'}, 971450: {'codigo': 971450, 'date': '2023-04-01T00:30:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Union Santa Fe', 'rival': 'Union Santa Fe'}, 971467: {'codigo': 971467, 'date': '2023-04-09T22:00:00+00:00', 'team_local': 'Huracan', 'team_visitor': 'River Plate', 'rival': 'Huracan'}, 971475: {'codigo': 971475, 'date': '2023-04-13T22:30:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Gimnasia L.P.', 'rival': 'Gimnasia L.P.'}, 971490: {'codigo': 971490, 'date': '2023-04-16T22:00:00+00:00', 'team_local': 'Newells Old Boys', 'team_visitor': 'River Plate', 'rival': 'Newells Old Boys'}, 971500: {'codigo': 971500, 'date': '2023-04-23T23:30:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Independiente', 'rival': 'Independiente'}, 971513: {'codigo': 971513, 'date': '2023-04-29T00:30:00+00:00', 'team_local': 'Atletico Tucuman', 'team_visitor': 'River Plate', 'rival': 'Atletico Tucuman'}, 971525: {'codigo': 971525, 'date': '2023-05-07T20:30:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Boca Juniors', 'rival': 'Boca Juniors'}, 971536: {'codigo': 971536, 'date': '2023-05-15T00:30:00+00:00', 'team_local': 'Talleres Cordoba', 'team_visitor': 'River Plate', 'rival': 'Talleres Cordoba'}, 971550: {'codigo': 971550, 'date': '2023-05-21T23:30:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Platense', 'rival': 'Platense'}, 971559: {'codigo': 971559, 'date': '2023-05-30T00:30:00+00:00', 'team_local': 'Velez Sarsfield', 'team_visitor': 'River Plate', 'rival': 'Velez Sarsfield'}, 971575: {'codigo': 971575, 'date': '2023-06-18T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Defensa Y Justicia', 'rival': 'Defensa Y Justicia'}, 971582: {'codigo': 971582, 'date': '2023-06-12T22:15:00+00:00', 'team_local': 'Banfield', 'team_visitor': 'River Plate', 'rival': 'Banfield'}, 971606: {'codigo': 971606, 'date': '2023-07-02T00:00:00+00:00', 'team_local': 'Barracas Central', 'team_visitor': 'River Plate', 'rival': 'Barracas Central'}, 971624: {'codigo': 971624, 'date': '2023-07-05T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Colon Santa Fe', 'rival': 'Colon Santa Fe'}, 971629: {'codigo': 971629, 'date': '2023-07-09T00:00:00+00:00', 'team_local': 'San Lorenzo', 'team_visitor': 'River Plate', 'rival': 'San Lorenzo'}, 971649: {'codigo': 971649, 'date': '2023-07-16T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Estudiantes L.P.', 'rival': 'Estudiantes L.P.'}, 971652: {'codigo': 971652, 'date': '2023-07-23T00:00:00+00:00', 'team_local': 'Rosario Central', 'team_visitor': 'River Plate', 'rival': 'Rosario Central'}, 971674: {'codigo': 971674, 'date': '2023-07-30T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Racing Club', 'rival': 'Racing Club'}, 988695: {'codigo': 988695, 'date': '2023-11-19T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Instituto Cordoba', 'rival': 'Instituto Cordoba'}, 988711: {'codigo': 988711, 'date': '2023-03-20T00:30:00+00:00', 'team_local': 'Sarmiento Junin', 'team_visitor': 'River Plate', 'rival': 'Sarmiento Junin'}, 988737: {'codigo': 988737, 'date': '2023-06-22T22:45:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Instituto Cordoba', 'rival': 'Instituto Cordoba'}}

import random
import http.client
import json
import os 
import csv

def limpiar_consola()->None:
    '''Limpia la consola del sistema.'''
    if os.name == 'nt':
        os.system('cls')
    else:
        os.system('clear')

def pago_apuestas(fixture_id:int, team_local:str)->list:
    '''Recibe el fixture id y el equipo que es local, consulta en la api las predicciones de ese partido y devuelve, 
    segun esos datos, cuanto se le pagara a cada equipo L/V'''
    prediction = api_predictions_por_fixture(fixture_id)

    winner_name : str = prediction['winner_name']

    number = random.randint(1, 4)

    pay_local = number
    pay_visitor = number

    if(winner_name.upper() == team_local.upper()):
        if(prediction['win_or_draw']):
            pay_local = pay_local * 0.1
        else:
            pay_visitor = pay_visitor * 0.1
    else: 
        if(prediction['win_or_draw']):
            pay_visitor = pay_visitor * 0.1
        else:
            pay_local = pay_local * 0.1
    
    return [round(pay_local,1), round(pay_visitor, 1)]

def api_fixture(id_equipo: int, equipo: str, fixtures:dict)->None:
    ''' Recibe el id del equipo y carga los datos en el dict fixtures'''
    # conn = http.client.HTTPSConnection("v3.football.api-sports.io")
    # headers = {
    #     'x-rapidapi-host': "v3.football.api-sports.io",
    #     'x-rapidapi-key': "e47f133bb10ac93f5737c9bedbe082e3"
    #     }
    # conn.request("GET", f"/fixtures?league=128&season=2023&team={id_equipo}", headers=headers)
    # res = conn.getresponse()
    # data = res.read()

    # data_decode = data.decode("utf-8")
    # data_format = json.loads(data_decode)

    # response : list = data_format['response']

    fixtures = {971183: {'codigo': 971183, 'date': '2023-08-20T00:00:00+00:00', 'team_local': 'Argentinos JRS', 'team_visitor': 'River Plate', 'rival': 'Argentinos JRS'}, 971199: {'codigo': 971199, 'date': '2023-08-27T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Barracas Central', 'rival': 'Barracas Central'}, 971206: {'codigo': 971206, 'date': '2023-09-03T00:00:00+00:00', 'team_local': 'Velez Sarsfield', 'team_visitor': 'River Plate', 'rival': 'Velez Sarsfield'}, 971223: {'codigo': 971223, 'date': '2023-09-10T00:00:00+00:00', 'team_local': 'Arsenal Sarandi', 'team_visitor': 'River Plate', 'rival': 'Arsenal Sarandi'}, 971231: {'codigo': 971231, 'date': '2023-09-17T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Atletico Tucuman', 'rival': 'Atletico Tucuman'}, 971246: {'codigo': 971246, 'date': '2023-09-24T00:00:00+00:00', 'team_local': 'Banfield', 'team_visitor': 'River Plate', 'rival': 'Banfield'}, 971259: {'codigo': 971259, 'date': '2023-10-01T00:00:00+00:00', 'team_local': 'Boca Juniors', 'team_visitor': 'River Plate', 'rival': 'Boca Juniors'}, 971268: {'codigo': 971268, 'date': '2023-10-08T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Talleres Cordoba', 'rival': 'Talleres Cordoba'}, 971281: {'codigo': 971281, 'date': '2023-10-15T00:00:00+00:00', 'team_local': 'Colon Santa Fe', 'team_visitor': 'River Plate', 'rival': 'Colon Santa Fe'}, 971293: {'codigo': 971293, 'date': '2023-10-22T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Independiente', 'rival': 'Independiente'}, 971304: {'codigo': 971304, 'date': '2023-10-29T00:00:00+00:00', 'team_local': 'Gimnasia L.P.', 'team_visitor': 'River Plate', 'rival': 'Gimnasia L.P.'}, 971318: {'codigo': 971318, 'date': '2023-11-05T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Huracan', 'rival': 'Huracan'}, 971327: {'codigo': 971327, 'date': '2023-11-12T00:00:00+00:00', 'team_local': 'Rosario Central', 'team_visitor': 'River Plate', 'rival': 'Rosario Central'}, 971350: {'codigo': 971350, 'date': '2023-01-29T00:30:00+00:00', 'team_local': 'Central Cordoba de Santiago', 'team_visitor': 'River Plate', 'rival': 'Central Cordoba de Santiago'}, 971374: {'codigo': 971374, 'date': '2023-02-04T22:15:00+00:00', 'team_local': 'Belgrano Cordoba', 'team_visitor': 'River Plate', 'rival': 'Belgrano Cordoba'}, 971376: {'codigo': 971376, 'date': '2023-02-12T22:15:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Argentinos JRS', 'rival': 'Argentinos JRS'}, 971397: {'codigo': 971397, 'date': '2023-02-18T21:00:00+00:00', 'team_local': 'Tigre', 'team_visitor': 'River Plate', 'rival': 'Tigre'}, 971401: {'codigo': 971401, 'date': '2023-02-26T22:15:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Arsenal Sarandi', 'rival': 'Arsenal Sarandi'}, 971420: {'codigo': 971420, 'date': '2023-03-04T22:15:00+00:00', 'team_local': 'Lanus', 'team_visitor': 'River Plate', 'rival': 'Lanus'}, 971426: {'codigo': 971426, 'date': '2023-03-12T22:15:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Godoy Cruz', 'rival': 'Godoy Cruz'}, 971450: {'codigo': 971450, 'date': '2023-04-01T00:30:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Union Santa Fe', 'rival': 'Union Santa Fe'}, 971467: {'codigo': 971467, 'date': '2023-04-09T22:00:00+00:00', 'team_local': 'Huracan', 'team_visitor': 'River Plate', 'rival': 'Huracan'}, 971475: {'codigo': 971475, 'date': '2023-04-13T22:30:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Gimnasia L.P.', 'rival': 'Gimnasia L.P.'}, 971490: {'codigo': 971490, 'date': '2023-04-16T22:00:00+00:00', 'team_local': 'Newells Old Boys', 'team_visitor': 'River Plate', 'rival': 'Newells Old Boys'}, 971500: {'codigo': 971500, 'date': '2023-04-23T23:30:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Independiente', 'rival': 'Independiente'}, 971513: {'codigo': 971513, 'date': '2023-04-29T00:30:00+00:00', 'team_local': 'Atletico Tucuman', 'team_visitor': 'River Plate', 'rival': 'Atletico Tucuman'}, 971525: {'codigo': 971525, 'date': '2023-05-07T20:30:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Boca Juniors', 'rival': 'Boca Juniors'}, 971536: {'codigo': 971536, 'date': '2023-05-15T00:30:00+00:00', 'team_local': 'Talleres Cordoba', 'team_visitor': 'River Plate', 'rival': 'Talleres Cordoba'}, 971550: {'codigo': 971550, 'date': '2023-05-21T23:30:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Platense', 'rival': 'Platense'}, 971559: {'codigo': 971559, 'date': '2023-05-30T00:30:00+00:00', 'team_local': 'Velez Sarsfield', 'team_visitor': 'River Plate', 'rival': 'Velez Sarsfield'}, 971575: {'codigo': 971575, 'date': '2023-06-18T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Defensa Y Justicia', 'rival': 'Defensa Y Justicia'}, 971582: {'codigo': 971582, 'date': '2023-06-12T22:15:00+00:00', 'team_local': 'Banfield', 'team_visitor': 'River Plate', 'rival': 'Banfield'}, 971606: {'codigo': 971606, 'date': '2023-07-02T00:00:00+00:00', 'team_local': 'Barracas Central', 'team_visitor': 'River Plate', 'rival': 'Barracas Central'}, 971624: {'codigo': 971624, 'date': '2023-07-05T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Colon Santa Fe', 'rival': 'Colon Santa Fe'}, 971629: {'codigo': 971629, 'date': '2023-07-09T00:00:00+00:00', 'team_local': 'San Lorenzo', 'team_visitor': 'River Plate', 'rival': 'San Lorenzo'}, 971649: {'codigo': 971649, 'date': '2023-07-16T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Estudiantes L.P.', 'rival': 'Estudiantes L.P.'}, 971652: {'codigo': 971652, 'date': '2023-07-23T00:00:00+00:00', 'team_local': 'Rosario Central', 'team_visitor': 'River Plate', 'rival': 'Rosario Central'}, 971674: {'codigo': 971674, 'date': '2023-07-30T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Racing Club', 'rival': 'Racing Club'}, 988695: {'codigo': 988695, 'date': '2023-11-19T00:00:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Instituto Cordoba', 'rival': 'Instituto Cordoba'}, 988711: {'codigo': 988711, 'date': '2023-03-20T00:30:00+00:00', 'team_local': 'Sarmiento Junin', 'team_visitor': 'River Plate', 'rival': 'Sarmiento Junin'}, 988737: {'codigo': 988737, 'date': '2023-06-22T22:45:00+00:00', 'team_local': 'River Plate', 'team_visitor': 'Instituto Cordoba', 'rival': 'Instituto Cordoba'}}

    # for res in response:
    #     team_home : str = res['teams']['home']['name']
    #     fixtures[res['fixture']['id']] = {
    #         'codigo' : res['fixture']['id'],
    #         'date' : res['fixture']['date'], 
    #         'team_local' : res['teams']['home']['name'],
    #         'team_visitor' : res['teams']['away']['name'],
    #         'rival' : res['teams']['away']['name'] if team_home.upper() == equipo else team_home
    #     }

def api_predictions_por_fixture(fixture_id : int)->dict:
    '''Recibe el id del fixture y devuelve la prediction de ese partido'''
    # conn = http.client.HTTPSConnection("v3.football.api-sports.io")

    # headers = {
    #     'x-rapidapi-host': "v3.football.api-sports.io",
    #     'x-rapidapi-key': "e47f133bb10ac93f5737c9bedbe082e3"
    #     }

    # conn.request("GET", f"/predictions?fixture={fixture_id}", headers=headers)

    # res = conn.getresponse()
    # data = res.read()

    # data_decode = data.decode("utf-8")
    # data_format = json.loads(data_decode)

    # response : list = data_format['response']

    response = [{'predictions': {'winner': {'id': 435, 'name': 'River Plate', 'comment': None}, 'win_or_draw': False, 'under_over': None, 'goals': {'home': '-1.5', 'away': '-3.5'}, 'advice': 'Winner : River Plate', 'percent': {'home': '10%', 'draw': '45%', 'away': '45%'}}, 'league': {'id': 128, 'name': 'Liga Profesional Argentina', 'country': 'Argentina', 'logo': 'https://media-1.api-sports.io/football/leagues/128.png', 'flag': 'https://media-3.api-sports.io/flags/ar.svg', 'season': 2023}, 'teams': {'home': {'id': 458, 'name': 'Argentinos JRS', 'logo': 'https://media-2.api-sports.io/football/teams/458.png', 'last_5': {'form': '60%', 'att': '50%', 'def': '63%', 'goals': {'for': {'total': 4, 'average': '0.8'}, 'against': {'total': 3, 'average': '0.6'}}}, 'league': {'form': 'LWLWLWDDWLWDLDDWLLWW', 'fixtures': {'played': {'home': 9, 'away': 11, 'total': 20}, 'wins': {'home': 5, 'away': 3, 'total': 8}, 'draws': {'home': 2, 'away': 3, 'total': 5}, 'loses': {'home': 2, 'away': 5, 'total': 7}}, 'goals': {'for': {'total': {'home': 18, 'away': 5, 'total': 23}, 'average': {'home': '2.0', 'away': '0.5', 'total': '1.2'}, 'minute': {'0-15': {'total': 2, 'percentage': '9.09%'}, '16-30': {'total': 3, 'percentage': '13.64%'}, '31-45': {'total': 3, 'percentage': '13.64%'}, '46-60': {'total': 5, 'percentage': '22.73%'}, '61-75': {'total': 3, 'percentage': '13.64%'}, '76-90': {'total': 4, 'percentage': '18.18%'}, '91-105': {'total': 2, 'percentage': '9.09%'}, '106-120': {'total': None, 'percentage': None}}}, 'against': {'total': {'home': 9, 'away': 8, 'total': 17}, 'average': {'home': '1.0', 'away': '0.7', 'total': '0.9'}, 'minute': {'0-15': {'total': 1, 'percentage': '5.56%'}, '16-30': {'total': 2, 'percentage': '11.11%'}, '31-45': {'total': 2, 'percentage': '11.11%'}, '46-60': {'total': 4, 'percentage': '22.22%'}, '61-75': {'total': 4, 'percentage': '22.22%'}, '76-90': {'total': 2, 'percentage': '11.11%'}, '91-105': {'total': 3, 'percentage': '16.67%'}, '106-120': {'total': None, 'percentage': None}}}}, 'biggest': {'streak': {'wins': 1, 'draws': 2, 'loses': 2}, 'wins': {'home': '5-1', 'away': '1-2'}, 'loses': {'home': '2-4', 'away': '2-0'}, 'goals': {'for': {'home': 5, 'away': 2}, 'against': {'home': 4, 'away': 2}}}, 'clean_sheet': {'home': 4, 'away': 5, 'total': 9}, 'failed_to_score': {'home': 1, 'away': 7, 'total': 8}, 'penalty': {'scored': {'total': 3, 'percentage': '100.00%'}, 'missed': {'total': 0, 'percentage': '0%'}, 'total': 3}, 'lineups': [{'formation': '3-5-2', 'played': 7}, {'formation': '3-1-4-2', 'played': 4}, {'formation': '4-3-1-2', 'played': 3}, {'formation': '3-4-1-2', 'played': 2}, {'formation': '4-1-4-1', 'played': 1}, {'formation': '4-4-2', 'played': 1}, {'formation': '3-5-1-1', 'played': 1}, {'formation': '3-4-2-1', 'played': 1}], 'cards': {'yellow': {'0-15': {'total': 2, 'percentage': '4.00%'}, '16-30': {'total': 4, 'percentage': '8.00%'}, '31-45': {'total': 9, 'percentage': '18.00%'}, '46-60': {'total': 8, 'percentage': '16.00%'}, '61-75': {'total': 8, 'percentage': '16.00%'}, '76-90': {'total': 12, 'percentage': '24.00%'}, '91-105': {'total': 7, 'percentage': '14.00%'}, '106-120': {'total': None, 'percentage': None}}, 'red': {'0-15': {'total': None, 'percentage': None}, '16-30': {'total': None, 'percentage': None}, '31-45': {'total': 1, 'percentage': '14.29%'}, '46-60': {'total': 1, 'percentage': '14.29%'}, '61-75': {'total': None, 'percentage': None}, '76-90': {'total': 3, 'percentage': '42.86%'}, '91-105': {'total': 2, 'percentage': '28.57%'}, '106-120': {'total': None, 'percentage': None}}}}}, 'away': {'id': 435, 'name': 'River Plate', 'logo': 'https://media-1.api-sports.io/football/teams/435.png', 'last_5': {'form': '67%', 'att': '100%', 'def': '25%', 'goals': {'for': {'total': 10, 'average': '2.0'}, 'against': {'total': 6, 'average': '1.2'}}}, 'league': {'form': 'WLWWLWWWWWWWWDWLWDW', 'fixtures': {'played': {'home': 8, 'away': 11, 'total': 19}, 'wins': {'home': 7, 'away': 7, 'total': 14}, 'draws': {'home': 0, 'away': 2, 'total': 2}, 'loses': {'home': 1, 'away': 2, 'total': 3}}, 'goals': {'for': {'total': {'home': 15, 'away': 20, 'total': 35}, 'average': {'home': '1.9', 'away': '1.8', 'total': '1.8'}, 'minute': {'0-15': {'total': 6, 'percentage': '17.65%'}, '16-30': {'total': 7, 'percentage': '20.59%'}, '31-45': {'total': 1, 'percentage': '2.94%'}, '46-60': {'total': 4, 'percentage': '11.76%'}, '61-75': {'total': 5, 'percentage': '14.71%'}, '76-90': {'total': 8, 'percentage': '23.53%'}, '91-105': {'total': 3, 'percentage': '8.82%'}, '106-120': {'total': None, 'percentage': None}}}, 'against': {'total': {'home': 4, 'away': 8, 'total': 12}, 'average': {'home': '0.5', 'away': '0.7', 'total': '0.6'}, 'minute': {'0-15': {'total': 2, 'percentage': '15.38%'}, '16-30': {'total': None, 'percentage': None}, '31-45': {'total': 3, 'percentage': '23.08%'}, '46-60': {'total': 1, 'percentage': '7.69%'}, '61-75': {'total': 4, 'percentage': '30.77%'}, '76-90': {'total': 3, 'percentage': '23.08%'}, '91-105': {'total': None, 'percentage': None}, '106-120': {'total': None, 'percentage': None}}}}, 'biggest': {'streak': {'wins': 8, 'draws': 1, 'loses': 1}, 'wins': {'home': '3-0', 'away': '1-4'}, 'loses': {'home': '1-2', 'away': '2-1'}, 'goals': {'for': {'home': 3, 'away': 4}, 'against': {'home': 2, 'away': 2}}}, 'clean_sheet': {'home': 5, 'away': 6, 'total': 11}, 'failed_to_score': {'home': 0, 'away': 0, 'total': 0}, 'penalty': {'scored': {'total': 9, 'percentage': '100.00%'}, 'missed': {'total': 0, 'percentage': '0%'}, 'total': 9}, 'lineups': [{'formation': '4-2-3-1', 'played': 6}, {'formation': '4-3-1-2', 'played': 4}, {'formation': '4-1-3-2', 'played': 2}, {'formation': '4-3-2-1', 'played': 2}, {'formation': '4-2-2-2', 'played': 2}, {'formation': '4-3-3', 'played': 2}, {'formation': '3-4-1-2', 'played': 1}], 'cards': {'yellow': {'0-15': {'total': 4, 'percentage': '8.33%'}, '16-30': {'total': 4, 'percentage': '8.33%'}, '31-45': {'total': 8, 'percentage': '16.67%'}, '46-60': {'total': 7, 'percentage': '14.58%'}, '61-75': {'total': 15, 'percentage': '31.25%'}, '76-90': {'total': 6, 'percentage': '12.50%'}, '91-105': {'total': 4, 'percentage': '8.33%'}, '106-120': {'total': None, 'percentage': None}}, 'red': {'0-15': {'total': None, 'percentage': None}, '16-30': {'total': 1, 'percentage': '25.00%'}, '31-45': {'total': None, 'percentage': None}, '46-60': {'total': None, 'percentage': None}, '61-75': {'total': None, 'percentage': None}, '76-90': {'total': None, 'percentage': None}, '91-105': {'total': 1, 'percentage': '25.00%'}, '106-120': {'total': None, 'percentage': None}, '': {'total': 2, 'percentage': '50.00%'}}}}}}, 'comparison': {'form': {'home': '47%', 'away': '53%'}, 'att': {'home': '29%', 'away': '71%'}, 'def': {'home': '67%', 'away': '33%'}, 'poisson_distribution': {'home': '36%', 'away': '64%'}, 'h2h': {'home': '0%', 'away': '100%'}, 'goals': {'home': '18%', 'away': '82%'}, 'total': {'home': '39.4%', 'away': '60.6%'}}, 'h2h': [{'fixture': {'id': 971376, 'referee': 'F. Rapallini', 'timezone': 'UTC', 'date': '2023-02-12T22:15:00+00:00', 'timestamp': 1676240100, 'periods': {'first': 1676240100, 'second': 1676243700}, 'venue': {'id': 31, 'name': 'Estadio Monumental Antonio Vespucio Liberti', 'city': 'Capital Federal, Ciudad de Buenos Aires'}, 'status': {'long': 'Match Finished', 'short': 'FT', 'elapsed': 90}}, 'league': {'id': 128, 'name': 'Liga Profesional Argentina', 'country': 'Argentina', 'logo': 'https://media-1.api-sports.io/football/leagues/128.png', 'flag': 'https://media-1.api-sports.io/flags/ar.svg', 'season': 2023, 'round': '1st Phase - 3'}, 'teams': {'home': {'id': 435, 'name': 'River Plate', 'logo': 'https://media-2.api-sports.io/football/teams/435.png', 'winner': True}, 'away': {'id': 458, 'name': 'Argentinos JRS', 'logo': 'https://media-2.api-sports.io/football/teams/458.png', 'winner': False}}, 'goals': {'home': 2, 'away': 1}, 'score': {'halftime': {'home': 0, 'away': 1}, 'fulltime': {'home': 2, 'away': 1}, 'extratime': {'home': None, 'away': None}, 'penalty': {'home': None, 'away': None}}}, {'fixture': {'id': 863472, 'referee': 'Y. Falcón', 'timezone': 'UTC', 'date': '2022-10-02T23:30:00+00:00', 'timestamp': 1664753400, 'periods': {'first': 1664753400, 'second': 1664757000}, 'venue': {'id': 37, 'name': 'Estadio Diego Armando Maradona', 'city': 'Capital Federal, Ciudad de Buenos Aires'}, 'status': {'long': 'Match Finished', 'short': 'FT', 'elapsed': 90}}, 'league': {'id': 128, 'name': 'Liga Profesional Argentina', 'country': 'Argentina', 'logo': 'https://media-2.api-sports.io/football/leagues/128.png', 'flag': 'https://media-3.api-sports.io/flags/ar.svg', 'season': 2022, 'round': '2nd Phase - 22'}, 'teams': {'home': {'id': 458, 'name': 'Argentinos JRS', 'logo': 'https://media-3.api-sports.io/football/teams/458.png', 'winner': False}, 'away': {'id': 435, 'name': 'River Plate', 'logo': 'https://media-1.api-sports.io/football/teams/435.png', 'winner': True}}, 'goals': {'home': 0, 'away': 3}, 'score': {'halftime': {'home': 0, 'away': 0}, 'fulltime': {'home': 0, 'away': 3}, 'extratime': {'home': None, 'away': None}, 'penalty': {'home': None, 'away': None}}}, {'fixture': {'id': 831782, 'referee': 'Y. Falcón', 'timezone': 'UTC', 'date': '2022-04-10T22:00:00+00:00', 'timestamp': 1649628000, 'periods': {'first': 1649628000, 'second': 1649631600}, 'venue': {'id': 31, 'name': 'Estadio Monumental Antonio Vespucio Liberti', 'city': 'Capital Federal, Ciudad de Buenos Aires'}, 'status': {'long': 'Match Finished', 'short': 'FT', 'elapsed': 90}}, 'league': {'id': 128, 'name': 'Liga Profesional Argentina', 'country': 'Argentina', 'logo': 'https://media-2.api-sports.io/football/leagues/128.png', 'flag': 'https://media-3.api-sports.io/flags/ar.svg', 'season': 2022, 'round': '1st Phase - 9'}, 'teams': {'home': {'id': 435, 'name': 'River Plate', 'logo': 'https://media-3.api-sports.io/football/teams/435.png', 'winner': True}, 'away': {'id': 458, 'name': 'Argentinos JRS', 'logo': 'https://media-3.api-sports.io/football/teams/458.png', 'winner': False}}, 'goals': {'home': 4, 'away': 2}, 'score': {'halftime': {'home': 2, 'away': 1}, 'fulltime': {'home': 4, 'away': 2}, 'extratime': {'home': None, 'away': None}, 'penalty': {'home': None, 'away': None}}}, {'fixture': {'id': 720409, 'referee': 'P. Loustau', 'timezone': 'UTC', 'date': '2021-10-25T22:00:00+00:00', 'timestamp': 1635199200, 'periods': {'first': 1635199200, 'second': 1635202800}, 'venue': {'id': 31, 'name': 'Estadio Monumental Antonio Vespucio Liberti', 'city': 'Capital Federal, Ciudad de Buenos Aires'}, 'status': {'long': 'Match Finished', 'short': 'FT', 'elapsed': 90}}, 'league': {'id': 128, 'name': 'Liga Profesional Argentina', 'country': 'Argentina', 'logo': 'https://media-3.api-sports.io/football/leagues/128.png', 'flag': 'https://media-3.api-sports.io/flags/ar.svg', 'season': 2021, 'round': '2nd Phase - 18'}, 'teams': {'home': {'id': 435, 'name': 'River Plate', 'logo': 'https://media-1.api-sports.io/football/teams/435.png', 'winner': True}, 'away': {'id': 458, 'name': 'Argentinos JRS', 'logo': 'https://media-3.api-sports.io/football/teams/458.png', 'winner': False}}, 'goals': {'home': 3, 'away': 0}, 'score': {'halftime': {'home': 1, 'away': 0}, 'fulltime': {'home': 3, 'away': 0}, 'extratime': {'home': None, 'away': None}, 'penalty': {'home': None, 'away': None}}}, {'fixture': {'id': 706494, 'referee': 'E. Aquino', 'timezone': 'UTC', 'date': '2021-07-22T00:30:00+00:00', 'timestamp': 1626913800, 'periods': {'first': 1626913800, 'second': 1626917400}, 'venue': {'id': 37, 'name': 'Estadio Diego Armando Maradona', 'city': 'Capital Federal, Ciudad de Buenos Aires'}, 'status': {'long': 'Match Finished', 'short': 'FT', 'elapsed': 90}}, 'league': {'id': 13, 'name': 'CONMEBOL Libertadores', 'country': 'World', 'logo': 'https://media-2.api-sports.io/football/leagues/13.png', 'flag': None, 'season': 2021, 'round': 'Round of 16'}, 'teams': {'home': {'id': 458, 'name': 'Argentinos JRS', 'logo': 'https://media-3.api-sports.io/football/teams/458.png', 'winner': False}, 'away': {'id': 435, 'name': 'River Plate', 'logo': 'https://media-1.api-sports.io/football/teams/435.png', 'winner': True}}, 'goals': {'home': 0, 'away': 2}, 'score': {'halftime': {'home': 0, 'away': 1}, 'fulltime': {'home': 0, 'away': 2}, 'extratime': {'home': None, 'away': None}, 'penalty': {'home': None, 'away': None}}}, {'fixture': {'id': 706493, 'referee': 'Bruno Arleu de Araujo', 'timezone': 'UTC', 'date': '2021-07-15T00:30:00+00:00', 'timestamp': 1626309000, 'periods': {'first': 1626309000, 'second': 1626312600}, 'venue': {'id': 31, 'name': 'Estadio Monumental Antonio Vespucio Liberti', 'city': 'Capital Federal, Ciudad de Buenos Aires'}, 'status': {'long': 'Match Finished', 'short': 'FT', 'elapsed': 90}}, 'league': {'id': 13, 'name': 'CONMEBOL Libertadores', 'country': 'World', 'logo': 'https://media-2.api-sports.io/football/leagues/13.png', 'flag': None, 'season': 2021, 'round': 'Round of 16'}, 'teams': {'home': {'id': 435, 'name': 'River Plate', 'logo': 'https://media-3.api-sports.io/football/teams/435.png', 'winner': None}, 'away': {'id': 458, 'name': 'Argentinos JRS', 'logo': 'https://media-1.api-sports.io/football/teams/458.png', 'winner': None}}, 'goals': {'home': 1, 'away': 1}, 'score': {'halftime': {'home': 1, 'away': 1}, 'fulltime': {'home': 1, 'away': 1}, 'extratime': {'home': None, 'away': None}, 'penalty': {'home': None, 'away': None}}}, {'fixture': {'id': 674058, 'referee': 'N. Lamolina', 'timezone': 'UTC', 'date': '2021-03-09T00:30:00+00:00', 'timestamp': 1615249800, 'periods': {'first': 1615249800, 'second': 1615253400}, 'venue': {'id': 31, 'name': 'Estadio Monumental Antonio Vespucio Liberti', 'city': 'Capital Federal, Ciudad de Buenos Aires'}, 'status': {'long': 'Match Finished', 'short': 'FT', 'elapsed': 90}}, 'league': {'id': 128, 'name': 'Liga Profesional Argentina', 'country': 'Argentina', 'logo': 'https://media-3.api-sports.io/football/leagues/128.png', 'flag': 'https://media-3.api-sports.io/flags/ar.svg', 'season': 2021, 'round': '1st Phase - 4'}, 'teams': {'home': {'id': 435, 'name': 'River Plate', 'logo': 'https://media-3.api-sports.io/football/teams/435.png', 'winner': False}, 'away': {'id': 458, 'name': 'Argentinos JRS', 'logo': 'https://media-3.api-sports.io/football/teams/458.png', 'winner': True}}, 'goals': {'home': 0, 'away': 1}, 'score': {'halftime': {'home': 0, 'away': 0}, 'fulltime': {'home': 0, 'away': 1}, 'extratime': {'home': None, 'away': None}, 'penalty': {'home': None, 'away': None}}}, {'fixture': {'id': 650220, 'referee': 'M. Vigliano', 'timezone': 'UTC', 'date': '2020-12-13T22:20:00+00:00', 'timestamp': 1607898000, 'periods': {'first': 1607898000, 'second': 1607901600}, 'venue': {'id': 7131, 'name': 'Estadio Libertadores de América', 'city': 'Avellaneda, Provincia de Buenos Aires'}, 'status': {'long': 'Match Finished', 'short': 'FT', 'elapsed': 90}}, 'league': {'id': 128, 'name': 'Liga Profesional Argentina', 'country': 'Argentina', 'logo': 'https://media-1.api-sports.io/football/leagues/128.png', 'flag': 'https://media-1.api-sports.io/flags/ar.svg', 'season': 2020, 'round': 'Championship Round - 1'}, 'teams': {'home': {'id': 435, 'name': 'River Plate', 'logo': 'https://media-2.api-sports.io/football/teams/435.png', 'winner': None}, 'away': {'id': 458, 'name': 'Argentinos JRS', 'logo': 'https://media-1.api-sports.io/football/teams/458.png', 'winner': None}}, 'goals': {'home': 1, 'away': 1}, 'score': {'halftime': {'home': 1, 'away': 0}, 'fulltime': {'home': 1, 'away': 1}, 'extratime': {'home': None, 'away': None}, 'penalty': {'home': None, 'away': None}}}, {'fixture': {'id': 329179, 'referee': None, 'timezone': 'UTC', 'date': '2020-04-05T19:00:00+00:00', 'timestamp': 1586113200, 'periods': {'first': None, 'second': None}, 'venue': {'id': 31, 'name': 'Estadio Monumental Antonio Vespucio Liberti', 'city': 'Capital Federal, Ciudad de Buenos Aires'}, 'status': {'long': 'Match Cancelled', 'short': 'CANC', 'elapsed': None}}, 'league': {'id': 483, 'name': 'Copa de la Superliga', 'country': 'Argentina', 'logo': 'https://media-2.api-sports.io/football/leagues/483.png', 'flag': 'https://media-2.api-sports.io/flags/ar.svg', 'season': 2020, 'round': 'Group A - 4'}, 'teams': {'home': {'id': 435, 'name': 'River Plate', 'logo': 'https://media-1.api-sports.io/football/teams/435.png', 'winner': None}, 'away': {'id': 458, 'name': 'Argentinos JRS', 'logo': 'https://media-1.api-sports.io/football/teams/458.png', 'winner': None}}, 'goals': {'home': None, 'away': None}, 'score': {'halftime': {'home': None, 'away': None}, 'fulltime': {'home': None, 'away': None}, 'extratime': {'home': None, 'away': None}, 'penalty': {'home': None, 'away': None}}}, {'fixture': {'id': 215552, 'referee': 'F. Rapallini', 'timezone': 'UTC', 'date': '2019-07-27T23:00:00+00:00', 'timestamp': 1564268400, 'periods': {'first': 1564268400, 'second': 1564272000}, 'venue': {'id': 37, 'name': 'Estadio Diego Armando Maradona', 'city': 'Capital Federal, Ciudad de Buenos Aires'}, 'status': {'long': 'Match Finished', 'short': 'FT', 'elapsed': 90}}, 'league': {'id': 128, 'name': 'Liga Profesional Argentina', 'country': 'Argentina', 'logo': 'https://media-1.api-sports.io/football/leagues/128.png', 'flag': 'https://media-3.api-sports.io/flags/ar.svg', 'season': 2019, 'round': 'Regular Season - 1'}, 'teams': {'home': {'id': 458, 'name': 'Argentinos JRS', 'logo': 'https://media-2.api-sports.io/football/teams/458.png', 'winner': None}, 'away': {'id': 435, 'name': 'River Plate', 'logo': 'https://media-2.api-sports.io/football/teams/435.png', 'winner': None}}, 'goals': {'home': 1, 'away': 1}, 'score': {'halftime': {'home': 1, 'away': 0}, 'fulltime': {'home': 1, 'away': 1}, 'extratime': {'home': None, 'away': None}, 'penalty': {'home': None, 'away': None}}}]}]

    for res in response:
        prediction = {
            'winner_id' : res['predictions']['winner']['id'],
            'winner_name' : res['predictions']['winner']['name'],
            'win_or_draw' : res['predictions']['win_or_draw'],
            'prediction': res['predictions']['advice']
        }

    return prediction

def validacion_cod_fixture(codigo:int, fixtures:dict)->bool:
    '''Verfica que el codigo (id del fixture) este dentro del dict de fixtures'''
    return codigo not in list(FIXTURES.keys())
    # return codigo not in list(fixtures.keys())

def elegir_partido(fixtures:dict)->int:
    '''Recibe el diccionario de fixtures y devuelve el codigo ingresado por el usuario habiendo
    verificado que exista en los fixtures.'''
    codigo = int(input("Ingrese el codigo de la fecha por la que quiere apostar: "))
    while(validacion_cod_fixture(codigo, fixtures)):
        print("El codigo ingresado no corresponde a una fecha de partido. Intente nuevamente.")
    
    return codigo

def leer_archivo_usuarios()->dict:
    '''Lee el archivo usuarios y devuelve un diccionario con los datos.'''
    archivo = 'usuarios.csv'
    #recibe el archivo usuarios.csv y me devuelve sus datos en un diccionario
    usuarios = {}
    with open(archivo, 'r') as archivo_aux:
        texto = csv.reader(archivo_aux)
        next(texto)
        for linea in texto:
            email = linea[0]
            valores = linea[1:]
            usuarios[email] = valores

    return usuarios

def dinero_disponible(usuario:str)->int:
    '''Recibe el id del usuario (mail) y devuelve el dinero disponible que tiene ese usuario'''
    usuarios = leer_archivo_usuarios()
    datos_usuario = usuarios[usuario]

    return datos_usuario[4]

def simular_resultado()->str:
    '''Devuelve una inicial que simula un resultado de partido.'''
    dado = random(1, 3)

    if(dado == 1):
        return "L"

    if(dado == 2):
        return "E"
    
    if(dado == 3):
        return "V"
    
def cargar_dinero_disponible(usuario: str, dinero:int) ->None:
    '''Recibe el id del usuario(mail) y el dinero a cargar.
    Modifica el archivo usuarios para actualizar el monto disponible de ese usuario'''
    archivo_csv = 'usuarios.csv'
    datas = []
    with open(archivo_csv, 'r') as archivo:
        leer = csv.reader(archivo)
        for fila in leer:
            datas.append(fila)
    
    for data in datas:
        if(data[0] == usuario):
            data[5] = int(data[5]) + dinero
    
    with open(archivo_csv, 'w', newline='') as archivo:
        escribir = csv.writer(archivo)
        escribir.writerows(datas)

def descontar_dinero(usuario:str, monto_descontar:int)->None:
    '''Recibe el id del usuario(mail) y el monto a descontar.
    Modifica el archivo usuarios para actualizar el monto disponible de ese usuario'''
    archivo_csv = 'usuarios.csv'
    datas = []
    with open(archivo_csv, 'r') as archivo:
        leer = csv.reader(archivo)
        for fila in leer:
            datas.append(fila)
    
    for data in datas:
        if(data[0] == usuario):
            data[5] = int(data[5]) - monto_descontar
    
    with open(archivo_csv, 'w', newline='') as archivo:
        escribir = csv.writer(archivo)
        escribir.writerows(datas)

def existe_archivo(nombre_archivo:str)->bool:
    '''Recibe el nombre del archivo y devuelve un bool (True/False) si el archivo existe o no.'''
    return os.path.exists(nombre_archivo)

def archivo_vacio(nombre_archivo:str)->bool:
    '''Recibe el nombre del archivo y verifa que no este vacio. Devuelve un True o False.'''
    with open(nombre_archivo, 'r') as archivo:
        caracter = archivo.read(1)
        print(caracter)
        if(caracter):
            False
        else: 
            True
            
def guardar_transacciones(usuario:str, dinero:int, tipo:str)->None:
    '''Recibe el id usuario (mail), el dinero y el tipo de transaccion.
    Guarda en el archivo transacciones los datos.'''
    encabezados = ['idEmail', 'fecha', 'tipo', 'importe']
    datos = []
    archivo_vacio = True 

    if(existe_archivo('transacciones.csv')):
        archivo_vacio = False
        with open('transacciones.csv', 'r') as archivo:
            leer = csv.reader(archivo)
            for fila in leer:
                datos.append(fila)
            
    fila = [usuario, 'hoy', tipo, dinero]
    datos.append(fila)

    with open('transacciones.csv', 'w', newline='') as archivo:
        escribir = csv.writer(archivo)
        if(archivo_vacio == False):
            escribir.writerows(datos)
        else: 
            escribir.writerow(encabezados)
            escribir.writerows(datos)

    return

def apostar_partido(codigo:int, fixtures:dict, usuario: str)->None:
    '''Recibe el id del fixture, el dict de fixtures y el id del usuario (mail)
    El usuario apuesta por un partido con su dinero disponible y se le devuelve un mensaje con su situacion, 
    si gano o perdio lo apostado. En ambos casos se guarda la transaccion y se descuenta o se suma a su dinero en cuenta.'''
    limpiar_consola()
    print("-- Datos del partido -- ")
    # print(f"Equipo local: {fixtures[codigo]['team_local']} - PAGA: {fixtures[codigo]['pay_local']} lo apostado")
    print(f"Equipo local: {FIXTURES[codigo]['team_local']} - PAGA: {FIXTURES[codigo]['pay_local']} lo apostado")
    # print(f"Equipo visitante: {fixtures[codigo]['team_visitor']} - PAGA: {fixtures[codigo]['pay_visitor']} lo apostado")
    print(f"Equipo local: {FIXTURES[codigo]['team_visitor']} - PAGA: {FIXTURES[codigo]['pay_visitor']} lo apostado")

    equipo = input("Ingrese por quien quiere apostar Local o visitante. (L/V) :")
    while(equipo[0] not in ['L', 'V', 'l', 'v']):
        equipo = input("Debe ingresar por quien quiere apostar LOCAL o VISITANTE. (L/V) :")

    apuesta = input("Ingrese si GANA, EMPATE o PIERDE el equipo que elijio (G/P/E): ")
    while(apuesta[0] not in ['G', 'P', 'E', 'e', 'g', 'p']):
        apuesta = input("Debe ingresar su apuesta. GANA, PIERDE o EMPATA su equipo elegido (G/P/E): ")

    dinero = dinero_disponible(usuario)

    if(dinero == 0):
        print("Usted no dispone de dinero para apostar.")
        print("Finalizo el programa")
        return

    print(f"Usted tiene disponible {dinero}.")
    monto = int(input("Ingrese el monto a apostar: "))

    while(monto > dinero):
        print("No dispone de dinero disponible para apostar el monto ingreado.")
        monto = int(input("Ingrese otro monto a apostar: "))

    resultado = simular_resultado()

    dinero_ganado = 0

    if(resultado == "L" & equipo[0].upper()): #gana el equipo elegido
        if(apuesta[0] == "G" or apuesta[0] == "E" ):
            # dinero_ganado = monto * fixtures[codigo]['pay_local']
            dinero_ganado = monto * FIXTURES[codigo]['pay_local']
            print("Has ganado!")
            #llamar a la funcion cargar dinero 
    
    if(resultado == "V" & equipo[0].upper()):  #gana el equipo elegido
        if(apuesta[0] == "G" or apuesta[0] == "E" ):
            dinero_ganado = monto * FIXTURES[codigo]['pay_visitor']
            print("Has ganado!")
    
    if(dinero_ganado > 0):  
        cargar_dinero_disponible(usuario, dinero_ganado)
        guardar_transacciones(usuario, dinero_ganado, 'Gana')
        print("Hemos cargado su dinero ganado correctamente!")
    else: 
        descontar_dinero(usuario, monto)
        guardar_transacciones(usuario, - monto, 'Pierde')
        print("Hemos descontado de su dinero disponible lo apostado.")
        return
    
def listado_fixture(equipo: str, fixtures:dict):
    '''Recibe el nombre de un equipo y devuelve el listado de partidos que debe jugar en el torneo'''
    id_equipo = EQUIPOS[equipo]

    # api_fixture(id_equipo, equipo, fixtures)

    count = 1
    if(len(fixtures) > 0):
    # if(len(FIXTURES) > 0):
        # for fixture in fixtures.values():
        for fixture in FIXTURES.values():
            pagos = pago_apuestas(fixture['codigo'], fixture['team_local'])
            fixture['pay_local'] = pagos[0] 
            fixture['pay_visitor'] = pagos[1] 
            print(f"************** Fecha {count} ************************")
            print(f"Codigo: {fixture['codigo']}")
            print(f"Fecha: {fixture['date']}")
            print(f"Rival: {fixture['rival']}")
            print(f"Local: {fixture['team_local']}, PAGA: {pagos[0]} veces lo apostado")
            print(f"Visitante: {fixture['team_visitor']}, PAGA: {pagos[1]} veces lo apostado")
            count += 1
        print("************************************************")
    return ''

def main():
    usuario_login = "pruba@mail.com"
    fixtures = {}
    equipo = input("Ingrese el nombre del equipo para conocer el listado del fixture: ")
    while equipo not in EQUIPOS:
        print("Debe ingresar el nombre de un equipo de la Liga Profesional 2023")
        equipo = input("Ingrese el nombre del equipo: ")

    listado_fixture(equipo.upper(), fixtures)

    while len(fixtures) > 0: 
        codigo = elegir_partido(fixtures)
        apostar_partido(codigo, fixtures, usuario_login)
    
    print("No hay partidos para mostrarle.")
main()

